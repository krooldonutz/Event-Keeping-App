<!DOCTYPE html>
<html>
<head>
    <title>Sold Event List</title>
    <!-- Include Bootstrap CSS styles -->
    <link href="/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <!-- Set background color for the body -->
    <body style="background-color: #f6f4f2;"></body>
    <!-- Image banner for the page -->
    <img src="/eventManagementApp.jpg" width="100%" height="20%" /><br><br>
    <!-- Container for the main content -->
    <div class="container text-center">
        <!-- Button to navigate back to the Home page -->
        <a type="button" class="btn btn-success" href="/">Home</a><br>
        <br>
        <!-- Title for the page -->
        <h1>Sold Event List</h1>
        <br>
        <!-- Container for the table of sold events -->
        <div class="container m-3">
            <!-- Table to display sold event details -->
            <table class="table">
                <thead class="table-light">
                    <tr>
                        <!-- Table headers -->
                        <th>Id</th>
                        <th>Name</th>
                        <th>Start</th>
                        <th>End</th>
                        <th>Duration</th>
                        <th>Is Active</th>
                        <th>Capacity</th>
                        <th>Tickets Available</th>
                        <th>Category ID</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Loop through sold event records -->
                    <% for (let i = 0; i < events.length; i++) { %>
                        <tr>
                            <!-- Display event ID -->
                            <th><%= events[i].eventId %></th>
                            <!-- Display event name -->
                            <td><%= events[i].name %></td>
                            <!-- Display start date and time -->
                            <td><%= new Date(new Date(events[i].startDateTime).getTime()).toLocaleString('en-UK', {
                                month: 'numeric',
                                day: 'numeric',
                                year: 'numeric',
                                hour: 'numeric',
                                minute: 'numeric',
                                second: 'numeric',
                                hour12: true
                            }) %></td>
                            <!-- Display end date and time -->
                            <td><%= new Date(new Date(events[i].startDateTime).getTime() + events[i].duration * 60000)
                                .toLocaleString('en-UK', {
                                    month: 'numeric',
                                    day: 'numeric',
                                    year: 'numeric',
                                    hour: 'numeric',
                                    minute: 'numeric',
                                    second: 'numeric',
                                    hour12: true
                                }) %></td>
                            <!-- Display event duration -->
                            <td><%= events[i].duration %></td>
                            <!-- Display checkbox for event status -->
                            <td>
                                <div class="form-check">
                                    <input type="checkbox" id="isActive<%= i %>" name="isActive<%= i %>" 
                                        class="form-check-input" <%= events[i].isActive === true ? 'checked' : '' %>>
                                </div>
                            </td>
                            <!-- Display event capacity -->
                            <td><%= events[i].capacity %></td>
                            <!-- Display available tickets -->
                            <td><%= events[i].ticketsAvailable %></td>
                            <!-- Display category ID -->
                            <td><%= events[i].categoryId %></td>
                            <!-- Display button to view event details -->
                            <td>
                                <div class="container">
                                    <a type="button" class="btn btn-primary" href="/category/32578393/view-event/<%= events[i].eventId %>">View</a>
                                </div>
                            </td>
                        </tr>
                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</body>
</html>
